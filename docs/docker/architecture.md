# Docker Architecture Diagram

## ğŸ—ï¸ Development Environment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         HOST MACHINE (You)                          â”‚
â”‚                                                                     â”‚
â”‚  ğŸ“‚ Source Code: /nestjs-template/src                              â”‚
â”‚  ğŸ“ .env file with configurations                                   â”‚
â”‚  ğŸ”§ docker-compose.dev.yml                                         â”‚
â”‚                                                                     â”‚
â”‚  Commands:                                                          â”‚
â”‚    npm run docker:up:dev      â†’ Start                              â”‚
â”‚    npm run docker:logs:dev    â†’ View logs                          â”‚
â”‚    npm run docker:shell:dev   â†’ Access container                   â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ Docker Engine
                             â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                                                 â”‚
â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   NestJS App (Development)       â”‚  â”‚   MySQL 8.0 Database         â”‚
â”‚   Container: nestjs-app-dev      â”‚  â”‚   Container: nestjs-mysql-devâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                  â”‚  â”‚                              â”‚
â”‚  ğŸ”¥ Hot Reload: ENABLED          â”‚  â”‚  ğŸ“Š Port: 3307 (exposed)     â”‚
â”‚  ğŸ“‚ Volumes:                     â”‚  â”‚  ğŸ’¾ Volume: mysql_data_dev   â”‚
â”‚     - ./src â†’ /app/src           â”‚  â”‚  âœ… Health Check: Active     â”‚
â”‚     - ./prisma â†’ /app/prisma     â”‚  â”‚  ğŸ” User: nestjs_user        â”‚
â”‚     - node_modules (protected)   â”‚  â”‚  ğŸ—„ï¸ Database: nestjs_db_dev  â”‚
â”‚                                  â”‚  â”‚                              â”‚
â”‚  ğŸŒ Port: 4000 (exposed)         â”‚  â”‚  Connection:                 â”‚
â”‚  ğŸ¥ Health Check: /health        â”‚  â”‚    mysql://nestjs_user:***   â”‚
â”‚  ğŸ”§ Mode: Development            â”‚  â”‚    @mysql:3306/nestjs_db_dev â”‚
â”‚  ğŸ“š Docs: /docs (Swagger)        â”‚  â”‚                              â”‚
â”‚                                  â”‚  â”‚                              â”‚
â”‚  Environment:                    â”‚  â”‚  First Start:                â”‚
â”‚    NODE_ENV=development          â”‚  â”‚    - Creates database        â”‚
â”‚    DATABASE_URL=mysql://...      â”‚  â”‚    - Initializes tables      â”‚
â”‚                                  â”‚  â”‚                              â”‚
â”‚  Startup:                        â”‚  â”‚  Persistent:                 â”‚
â”‚    1. Wait for database          â”‚  â”‚    - Data survives restarts  â”‚
â”‚    2. prisma migrate dev         â”‚  â”‚    - Separate from prod DB   â”‚
â”‚    3. npm run start:dev          â”‚  â”‚                              â”‚
â”‚                                  â”‚  â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                                      â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  Docker Network (dev)  â”‚
                      â”‚  nestjs-network-dev    â”‚
                      â”‚  Type: bridge          â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Production Environment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         HOST MACHINE (Server)                       â”‚
â”‚                                                                     â”‚
â”‚  ğŸ“ .env file with production configs                               â”‚
â”‚  ğŸ”§ docker-compose.yml                                             â”‚
â”‚  ğŸ” Secrets properly configured                                     â”‚
â”‚                                                                     â”‚
â”‚  Commands:                                                          â”‚
â”‚    npm run docker:up          â†’ Start                              â”‚
â”‚    npm run docker:logs        â†’ View logs                          â”‚
â”‚    npm run docker:verify      â†’ Check health                       â”‚
â”‚                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ Docker Engine
                             â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                                                 â”‚
â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   NestJS App (Production)        â”‚  â”‚   MySQL 8.0 Database         â”‚
â”‚   Container: nestjs-app          â”‚  â”‚   Container: nestjs-mysql    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                  â”‚  â”‚                              â”‚
â”‚  ğŸš€ Multi-Stage Build            â”‚  â”‚  ğŸ“Š Port: 3306 (exposed)     â”‚
â”‚  ğŸ‘¤ User: nestjs (non-root)      â”‚  â”‚  ğŸ’¾ Volume: mysql_data       â”‚
â”‚  ğŸ“¦ Size: ~200-300MB             â”‚  â”‚  âœ… Health Check: Active     â”‚
â”‚                                  â”‚  â”‚  ğŸ” User: nestjs_user        â”‚
â”‚  Layers:                         â”‚  â”‚  ğŸ—„ï¸ Database: nestjs_db      â”‚
â”‚    1. Dependencies (~50MB)       â”‚  â”‚                              â”‚
â”‚    2. Build (~100MB)             â”‚  â”‚  Optimized:                  â”‚
â”‚    3. Production (~150MB)        â”‚  â”‚    - Innodb settings         â”‚
â”‚                                  â”‚  â”‚    - Buffer pool size        â”‚
â”‚  ğŸŒ Port: 4000 (exposed)         â”‚  â”‚    - Connection pooling      â”‚
â”‚  ğŸ¥ Health Check: /health        â”‚  â”‚                              â”‚
â”‚  ğŸ”§ Mode: Production             â”‚  â”‚  Connection:                 â”‚
â”‚  ğŸ“š Docs: Disabled               â”‚  â”‚    mysql://nestjs_user:***   â”‚
â”‚                                  â”‚  â”‚    @mysql:3306/nestjs_db     â”‚
â”‚  Security:                       â”‚  â”‚                              â”‚
â”‚    - Non-root user (UID 1001)    â”‚  â”‚  Persistent:                 â”‚
â”‚    - Read-only filesystem (opt)  â”‚  â”‚    - Data in named volume    â”‚
â”‚    - No dev dependencies         â”‚  â”‚    - Backups recommended     â”‚
â”‚    - Minimal attack surface      â”‚  â”‚    - Replication ready       â”‚
â”‚                                  â”‚  â”‚                              â”‚
â”‚  Startup:                        â”‚  â”‚  Monitoring:                 â”‚
â”‚    1. Wait for database healthy  â”‚  â”‚    - Health checks every 10s â”‚
â”‚    2. prisma migrate deploy      â”‚  â”‚    - Auto restart on fail    â”‚
â”‚    3. node dist/main             â”‚  â”‚    - Logs to Docker driver   â”‚
â”‚                                  â”‚  â”‚                              â”‚
â”‚  Restart Policy:                 â”‚  â”‚  Restart Policy:             â”‚
â”‚    unless-stopped                â”‚  â”‚    unless-stopped            â”‚
â”‚                                  â”‚  â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                                      â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                      â”‚  Docker Network (prod) â”‚
                      â”‚  nestjs-network        â”‚
                      â”‚  Type: bridge          â”‚
                      â”‚  Isolated & Secure     â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Multi-Stage Build Process (Production)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Dockerfile Stages                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Stage 1: DEPENDENCIES                Stage 2: BUILD
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FROM node:22-alpine     â”‚        â”‚  FROM node:22-alpine     â”‚
â”‚                          â”‚        â”‚                          â”‚
â”‚  - Copy package.json     â”‚        â”‚  - Copy package.json     â”‚
â”‚  - Copy prisma/          â”‚        â”‚  - Install ALL deps      â”‚
â”‚  - npm ci (prod only)    â”‚        â”‚  - Copy source code      â”‚
â”‚  - Generate Prisma       â”‚        â”‚  - Generate Prisma       â”‚
â”‚                          â”‚        â”‚  - Build application     â”‚
â”‚  Output: node_modules/   â”‚        â”‚  - TypeScript â†’ JS       â”‚
â”‚         (production)     â”‚        â”‚                          â”‚
â”‚                          â”‚        â”‚  Output: dist/           â”‚
â”‚  Size: ~150MB            â”‚        â”‚                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚  Size: ~300MB            â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                               â”‚
                                               â–¼
                              Stage 3: PRODUCTION (FINAL)
                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                              â”‚  FROM node:22-alpine     â”‚
                              â”‚                          â”‚
                              â”‚  - Create nestjs user    â”‚
                              â”‚  - Copy from deps stage  â”‚
                              â”‚  - Copy from build stage â”‚
                              â”‚  - Set permissions       â”‚
                              â”‚  - Health check          â”‚
                              â”‚                          â”‚
                              â”‚  Contains:               â”‚
                              â”‚    âœ“ node_modules/       â”‚
                              â”‚    âœ“ dist/               â”‚
                              â”‚    âœ“ prisma/             â”‚
                              â”‚    âœ— src/ (excluded)     â”‚
                              â”‚    âœ— tests/ (excluded)   â”‚
                              â”‚                          â”‚
                              â”‚  Final Size: ~200MB      â”‚
                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                        â”‚
                                        â–¼
                              ğŸ³ Ready for deployment!
```

## ğŸ“Š Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Request Flow (Development)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Client Request
     â”‚
     â–¼
http://localhost:4000/users
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Docker Network â”‚  (nestjs-network-dev)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NestJS Container          â”‚
â”‚  - Receives request        â”‚
â”‚  - Validates JWT           â”‚
â”‚  - Checks permissions      â”‚
â”‚  - Runs business logic     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼ Prisma Query
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MySQL Container           â”‚
â”‚  - Executes SQL            â”‚
â”‚  - Returns data            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼ Result
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  NestJS Container          â”‚
â”‚  - Transforms response     â”‚
â”‚  - Applies interceptors    â”‚
â”‚  - Returns JSON            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
     Client Response
   { data: [...] }
```

## ğŸ”§ Volume Mappings

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Development Volumes                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

HOST                          CONTAINER                PURPOSE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
./src/            â†’  /app/src/              Hot reload
./prisma/         â†’  /app/prisma/           Schema changes
./test/           â†’  /app/test/             Tests
node_modules      â†”  (internal volume)      Prevent overwrite
dist              â†”  (internal volume)      Build output

mysql_data_dev    â†”  /var/lib/mysql         Database persistence

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Production Volumes                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

HOST                          CONTAINER                PURPOSE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
mysql_data        â†”  /var/lib/mysql         Database persistence

(No source code volumes - everything is in the image)
```

## ğŸ¯ Comparison: Dev vs Prod

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     Feature        â”‚     Development      â”‚     Production       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Image Build        â”‚ Simple (1 stage)     â”‚ Multi-stage (3)      â”‚
â”‚ Image Size         â”‚ ~1.2 GB              â”‚ ~200-300 MB          â”‚
â”‚ Build Time         â”‚ 2-3 minutes          â”‚ 3-5 minutes          â”‚
â”‚ Hot Reload         â”‚ âœ… Enabled            â”‚ âŒ Disabled           â”‚
â”‚ Source Volumes     â”‚ âœ… Mounted            â”‚ âŒ None               â”‚
â”‚ Dependencies       â”‚ All (dev + prod)     â”‚ Production only      â”‚
â”‚ Database Port      â”‚ 3307                 â”‚ 3306                 â”‚
â”‚ Database Name      â”‚ nestjs_db_dev        â”‚ nestjs_db            â”‚
â”‚ Swagger Docs       â”‚ âœ… /docs              â”‚ âŒ Disabled           â”‚
â”‚ Debug Logs         â”‚ âœ… Verbose            â”‚ âš ï¸  Production level  â”‚
â”‚ User              â”‚ root                 â”‚ nestjs (non-root)    â”‚
â”‚ Security          â”‚ Relaxed              â”‚ Hardened             â”‚
â”‚ Optimizations     â”‚ None                 â”‚ Many                 â”‚
â”‚ Use Case          â”‚ Local development    â”‚ Server deployment    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

This architecture provides:

- âœ… Complete isolation between environments
- âœ… Easy local development with hot reload
- âœ… Production-ready optimized builds
- âœ… Security best practices
- âœ… Scalability and maintainability
- âœ… Simple deployment process
